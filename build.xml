<?xml version="1.0" encoding="UTF-8"?>
<!-- ====================================================================== 
     6 May 2014 15:16:34                                                        

     ant script to do initial translation of vodml files to vodsl
     it is necessary to have the volute data models project checked out locally
     and to point the vodmlbase property at that location.
                   
     Paul Harrison                                                                
     ====================================================================== -->
<project name="project" default="alltodsl">
	
	<property name="vodmlbase" location="/Users/pharriso/Work/volute/projects/dm/"/>
    <target name="alltodsl"  description="description">
    	<todsl model="IVOA" sdir="vo-dml/models/ivoa"/> 
    	<todsl model="Characterization" sdir="vo-dml/models/characterization"/>
    	<todsl model="SourceDM" sdir="vo-dml/models/source-std" />
    	<todsl model="PhotDM-alt" sdir="vo-dml/models/photdm-alt" />
    	<todsl model="ObsCore" sdir="vo-dml/models/obscore"/>
  	    <todsl model="SpectrumDM" sdir="vo-dml/models/spectrum" />
    	<todsl model="RegTAP" sdir="vo-dml/models/registry"/>
    	<todsl model="coordsys_tessel" sdir="vo-dml/models/tesselation" />
    	<todsl model="coords_tessel" sdir="vo-dml/models/tesselation" />
    	<todsl model="lmsource" sdir="vo-dml/models/tesselation" />
    	<todsl model="Sample" sdir="vo-dml/models/sample/sample/"/>
    	<todsl model="Filter" sdir="vo-dml/models/sample/filter/"/>
        <todsl model="DatasetMetadata-1.0" sdir="DatasetMetadata/vo-dml/"/>
     	<todsl model="CAOM-2.3" sdir="vo-dml/models/caom2/"/>
        <todsl model="STC_coords-v2.0" sdir="STC/vo-dml/"/>
        <todsl model="STC_meas-v2.0" sdir="STC/vo-dml/"/>
        <todsl model="STC_trans-v2.0" sdir="STC/vo-dml/"/>
        <todsl model="ProvenanceDM" sdir="provenance/vo-dml/xml/"/>
	
    </target>
	
	<!-- ================================= 
          target: fewdsl              
         ================================= -->
    <target name="fewdsl"  description="do a few transformations">
     	<todsl model="Cube-1.0" sdir="Cube/vo-dml/" />
  	
    </target>


	
    <macrodef name="todsl">
        <attribute name="model" />
    	  <attribute name="sdir"  />
        <sequential>
      	<xslt style="vo-dml2dsl.xsl" in="${vodmlbase}/@{sdir}/@{model}.vo-dml.xml" out="@{model}.vodsl" force="true" >
      		<factory name="net.sf.saxon.TransformerFactoryImpl" />
<!--                  <param name="docversion" expression="${docversion}"/> -->
      		
       	</xslt>
        </sequential>
    </macrodef>


</project>
